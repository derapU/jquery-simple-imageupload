{"version":3,"sources":["../src/js/jquery.simple-imageupload.js"],"names":[],"mappings":"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","file":"jquery.simple-imageupload.js","sourcesContent":["( function ( $ ) {\n\t\"use strict\";\n\n\tvar SimpleImageupload;\n\n\t$.fn.simple_imageupload = function ( opts ) {\n\t\treturn this.each( function () {\n\t\t\tif ( undefined !== this.simple_imageupload ) {\n\t\t\t\tthis.simple_imageupload.revert();\n\t\t\t}\n\t\t\treturn this.simple_imageupload = new SimpleImageupload( $( this ), opts );\n\t\t} );\n\t};\n\n\tSimpleImageupload = function ( $input, opts ) {\n\t\tthis.init( $input, opts );\n\t\treturn this;\n\t};\n\tSimpleImageupload.prototype = {\n\t\tdefault_opts: {\n\t\t\tplaceholder: 'Click to choose image',\n\t\t\tcurrent_image: null,\n\t\t\tevents: {\n\t\t\t\tchange: function () {}\n\t\t\t}\n\t\t},\n\t\topts: null,\n\t\tinitial_value: null,\n\n\t\t$container: null,\n\t\t$preview: null,\n\t\t$input: null,\n\n\t\tinit: function ( $input, opts ) {\n\t\t\tthis.initial_value = $input.val();\n\n\t\t\t// configure and save the original field\n\t\t\tthis.opts   = $.extend( true, {}, this.default_opts, opts );\n\t\t\tthis.$input = $input;\n\n\t\t\t// create elements\n\t\t\tthis.create_container();\n\t\t\tthis.create_preview();\n\n\t\t\t// insert container and put input-field inside\n\t\t\tthis.$input.before( this.$container );\n\t\t\tthis.$container\n\t\t\t\t.append( this.$input )\n\t\t\t\t.append( this.$preview );\n\n\t\t\t// bind events\n\t\t\tthis.bind_events();\n\t\t},\n\n\t\tupdate_preview: function () {\n\t\t\tvar self = this,\n\t\t\t\t$reader,\n\t\t\t\t$preview = this.$preview;\n\n\t\t\t// display revert-icon\n\t\t\tif ( 0 < this.$input.prop( 'files' ).length ) {\n\t\t\t\tthis.$container.find( '._revert' ).removeClass( '_revert-hidden' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.$container.find( '._revert' ).addClass( '_revert-hidden' );\n\t\t\t}\n\n\t\t\tif ( undefined === this.$input.prop( 'files' )[0] ) {\n\t\t\t\tif ( null !== this.opts.current_image ) {\n\t\t\t\t\tthis.set_preview_image( this.opts.current_image );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( undefined === FileReader ) {\n\t\t\t\t// TODO:\n\t\t\t\t// preview not available\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// create filereader\n\t\t\t$reader = $( new FileReader() ).on( 'load', function ( e ) {\n\t\t\t\tself.set_preview_image( e.target.result );\n\t\t\t} );\n\n\t\t\tif ( this.$input.prop( 'files' ).length === 0 ) {\n\t\t\t\tself.set_preview_image();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// we support only a single file per input-field by now\n\t\t\t\t$reader[0].readAsDataURL( this.$input.prop( 'files' )[0] );\n\t\t\t}\n\t\t},\n\t\tset_preview_image: function ( url ) {\n\t\t\tif ( undefined !== url ) {\n\t\t\t\tthis.$preview\n\t\t\t\t.css( 'background-image', 'url(\"' + url + '\")' )\n\t\t\t\t.removeClass( 'simple-imageupload-empty' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// remove the preview\n\t\t\tthis.$preview\n\t\t\t.css( 'background-image', '' )\n\t\t\t.addClass( 'simple-imageupload-empty' );\n\t\t},\n\n\t\tcreate_container: function () {\n\t\t\tthis.$container = $( '<div class=\"simple-imageupload-container\"></div>' );\n\t\t\tthis.$container.clonecss( this.$input, [\n\t\t\t\t'background-color',\n\t\t\t\t'float',\n\t\t\t\t'margin-top',\n\t\t\t\t'margin-bottom',\n\t\t\t\t'margin-left',\n\t\t\t\t'margin-right',\n\t\t\t\t'top',\n\t\t\t\t'bottom',\n\t\t\t\t'left',\n\t\t\t\t'right',\n\t\t\t\t'height',\n\t\t\t\t'width'\n\t\t\t] );\n\t\t\tthis.$container.append( '<a href=\"#\" class=\"_revert _revert-hidden\"></a>' );\n\t\t},\n\t\tcreate_preview: function () {\n\t\t\tthis.$preview = $( '<div class=\"simple-imageupload-preview simple-imageupload-empty\">' )\n\t\t\t\t.attr( 'data-placeholder', this.opts.placeholder );\n\n\t\t\tthis.update_preview();\n\t\t},\n\n\t\tbind_events: function () {\n\t\t\tvar self = this;\n\n\t\t\tthis.$preview.on( 'click', function () {\n\t\t\t\tself.$input.trigger( 'click' );\n\t\t\t} );\n\n\t\t\tthis.$input.on( 'change', function () {\n\t\t\t\tself.update_preview();\n\t\t\t\tself.opts.events.change.apply( self, [$( this ).val()] );\n\t\t\t} );\n\n\t\t\tthis.$container.find( '._revert' ).on( 'click', function () {\n\t\t\t\tself.$input.val( self.initial_value );\n\t\t\t\tself.update_preview();\n\t\t\t} );\n\t\t},\n\n\t\trevert: function () {\n\t\t\tthis.$container.replaceWith( this.$input );\n\t\t\tthis.$input.val( this.initial_value );\n\t\t\tthis.$input.get( 0 ).simple_imageupload = undefined;\n\t\t}\n\t};\n} ( jQuery ) );\n"]}