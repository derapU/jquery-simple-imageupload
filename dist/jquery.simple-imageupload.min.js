/*! Simple Imageupload - v0.1.0 - 2015-06-09
* https://github.com/derapU/jquery-simple-imageupload
* Copyright (c) 2015 Andreas Berghaus; Licensed MIT */

!function(a){"use strict";var b;a.fn.simple_imageupload=function(c){return this.each(function(){return void 0!==this.simple_imageupload&&this.simple_imageupload.revert(),this.simple_imageupload=new b(a(this),c)})},b=function(a,b){return this.init(a,b),this},b.prototype={default_opts:{placeholder:"Click to choose image",current_image:null,events:{change:function(){}}},opts:null,initial_value:null,$container:null,$preview:null,$input:null,init:function(b,c){this.initial_value=b.val(),this.opts=a.extend(!0,{},this.default_opts,c),this.$input=b,this.create_container(),this.create_preview(),this.$input.before(this.$container),this.$container.append(this.$input).append(this.$preview),this.bind_events()},update_preview:function(){var b,c=this;this.$preview;return 0<this.$input.prop("files").length?this.$container.find("._revert").removeClass("_revert-hidden"):this.$container.find("._revert").addClass("_revert-hidden"),void 0===this.$input.prop("files")[0]?void(null!==this.opts.current_image&&this.set_preview_image(this.opts.current_image)):void(void 0!==FileReader&&(b=a(new FileReader).on("load",function(a){c.set_preview_image(a.target.result)}),0===this.$input.prop("files").length?c.set_preview_image():b[0].readAsDataURL(this.$input.prop("files")[0])))},set_preview_image:function(a){return void 0!==a?void this.$preview.css("background-image",'url("'+a+'")').removeClass("simple-imageupload-empty"):void this.$preview.css("background-image","").addClass("simple-imageupload-empty")},create_container:function(){this.$container=a('<div class="simple-imageupload-container"></div>'),this.$container.clonecss(this.$input,["background-color","float","margin-top","margin-bottom","margin-left","margin-right","top","bottom","left","right","height","width"]),this.$container.append('<a href="#" class="_revert _revert-hidden"></a>')},create_preview:function(){this.$preview=a('<div class="simple-imageupload-preview simple-imageupload-empty">').attr("data-placeholder",this.opts.placeholder),this.update_preview()},bind_events:function(){var b=this;this.$preview.on("click",function(){b.$input.trigger("click")}),this.$input.on("change",function(){b.update_preview(),b.opts.events.change.apply(b,[a(this).val()])}),this.$container.find("._revert").on("click",function(){b.$input.val(b.initial_value),b.update_preview()})},revert:function(){this.$container.replaceWith(this.$input),this.$input.val(this.initial_value),this.$input.get(0).simple_imageupload=void 0}}}(jQuery);
//# sourceMappingURL=jquery.simple-imageupload.min.map